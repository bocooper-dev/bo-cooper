import{D as e,E as t,C as a,B as o,P as n,k as s}from"./Bfn6d-nP.js";import{f as l,E as u,a as r,g as i,w as d}from"./B2PwHu1H.js";import{l as c,R as v,d as f,M as p,N as m,O as b,X as I,u as y,P as S,m as T,y as F,D as g,v as h}from"./BOuGH_in.js";const[B,C]=o("RovingFocusGroup"),_=c({__name:"RovingFocusGroup",props:{orientation:{default:void 0},dir:{},loop:{type:Boolean,default:!1},currentTabStopId:{},defaultCurrentTabStopId:{},preventScrollOnEntryFocus:{type:Boolean,default:!1},asChild:{type:Boolean},as:{}},emits:["entryFocus","update:currentTabStopId"],setup(o,{expose:s,emit:i}){const d=o,c=i,{loop:T,orientation:F,dir:g}=v(d),h=e(g),B=t(d,"currentTabStopId",c,{defaultValue:d.defaultCurrentTabStopId,passive:void 0===d.currentTabStopId}),_=f(!1),x=f(!1),K=f(0),{getItems:w,CollectionSlot:E}=a({isProvider:!0});function R(e){const t=!x.value;if(e.currentTarget&&e.target===e.currentTarget&&t&&!_.value){const t=new CustomEvent(u,r);if(e.currentTarget.dispatchEvent(t),c("entryFocus",t),!t.defaultPrevented){const e=w().map(e=>e.ref).filter(e=>""!==e.dataset.disabled),t=[e.find(e=>""===e.getAttribute("data-active")),e.find(e=>e.id===B.value),...e].filter(Boolean);l(t,d.preventScrollOnEntryFocus)}}x.value=!1}function D(){setTimeout(()=>{x.value=!1},1)}return s({getItems:w}),C({loop:T,dir:h,orientation:F,currentTabStopId:B,onItemFocus:e=>{B.value=e},onItemShiftTab:()=>{_.value=!0},onFocusableItemAdd:()=>{K.value++},onFocusableItemRemove:()=>{K.value--}}),(e,t)=>(m(),p(y(E),null,{default:b(()=>[I(y(n),{tabindex:_.value||0===K.value?-1:0,"data-orientation":y(F),as:e.as,"as-child":e.asChild,dir:y(h),style:{outline:"none"},onMousedown:t[0]||(t[0]=e=>x.value=!0),onMouseup:D,onFocus:R,onBlur:t[1]||(t[1]=e=>_.value=!1)},{default:b(()=>[S(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","as","as-child","dir"])]),_:3}))}}),x=c({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(e){const t=e,o=B(),u=s(),r=T(()=>t.tabStopId||u),c=T(()=>o.currentTabStopId.value===r.value),{getItems:v,CollectionItem:f}=a();function C(e){if("Tab"===e.key&&e.shiftKey)return void o.onItemShiftTab();if(e.target!==e.currentTarget)return;const a=i(e,o.orientation.value,o.dir.value);if(void 0!==a){if(e.metaKey||e.ctrlKey||e.altKey||!t.allowShiftKey&&e.shiftKey)return;e.preventDefault();let n=[...v().map(e=>e.ref).filter(e=>""!==e.dataset.disabled)];if("last"===a)n.reverse();else if("prev"===a||"next"===a){"prev"===a&&n.reverse();const t=n.indexOf(e.currentTarget);n=o.loop.value?d(n,t+1):n.slice(t+1)}h(()=>l(n))}}return F(()=>{t.focusable&&o.onFocusableItemAdd()}),g(()=>{t.focusable&&o.onFocusableItemRemove()}),(e,t)=>(m(),p(y(f),null,{default:b(()=>[I(y(n),{tabindex:c.value?0:-1,"data-orientation":y(o).orientation.value,"data-active":e.active?"":void 0,"data-disabled":e.focusable?void 0:"",as:e.as,"as-child":e.asChild,onMousedown:t[0]||(t[0]=t=>{e.focusable?y(o).onItemFocus(r.value):t.preventDefault()}),onFocus:t[1]||(t[1]=e=>y(o).onItemFocus(r.value)),onKeydown:C},{default:b(()=>[S(e.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}});export{_,x as a};
