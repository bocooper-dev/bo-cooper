import{h as e,ar as t,a8 as a,am as o,ab as n,c as s,aM as i,e as l,j as r}from"./Du8UmZZh.js";import{l as u,D as d,m as c,M as m,N as p,O as f,P as h,L as v,a7 as y,T as g,au as w,d as x,A as b,X as P,u as _,Y as z,ac as S,H as E}from"./BOuGH_in.js";import{u as C,f as $,a as j,m as k,r as q,d as A,M as L}from"./OyP54UL1.js";import{_ as M,a as W,b as T}from"./CeVUntn2.js";function H(e){return Promise.resolve().then(()=>{e()})}const N=u({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(e){const t=e;j(t);const{addPopStyle:a,removePopStyle:o,styles:n}=function(e){const t=new WeakMap,a=C();return{addPopStyle:function(o){if("popLayout"!==e.mode)return;const n=o.element.offsetParent,s=n instanceof HTMLElement&&n.offsetWidth||0,i={height:o.element.offsetHeight||0,width:o.element.offsetWidth||0,top:o.element.offsetTop,left:o.element.offsetLeft,right:0};i.right=s-i.width-i.left;const l="left"===e.anchorX?`left: ${i.left}`:`right: ${i.right}`;o.element.dataset.motionPopId=o.id;const r=document.createElement("style");a.value.nonce&&(r.nonce=a.value.nonce),t.set(o,r),document.head.appendChild(r),r.sheet&&r.sheet.insertRule(`\n    [data-motion-pop-id="${o.id}"] {\n      position: absolute !important;\n      width: ${i.width}px !important;\n      height: ${i.height}px !important;\n      top: ${i.top}px !important;\n      ${l}px !important;\n      }\n      `)},removePopStyle:function(e){const a=t.get(e);a&&(t.delete(e),$.render(()=>{document.head.removeChild(a)}))},styles:t}}(t);function s(e){const t=k.get(e);t&&(o(t),t.isVShow=!0,q(e),H(()=>{t.setActive("exit",!1)}))}const i=new Map;function l(e,s){var l;const r=function(e){let t=e;for(;t;){if(k.get(t))return t;t=t.firstElementChild}return null}(e),u=k.get(r);if(!r||!u)return s(),void(0===i.size&&(null==(l=t.onExitComplete)||l.call(t)));function d(e){var a,l;if(null==(a=null==e?void 0:e.detail)?void 0:a.isExit){const e=u.visualElement.projection;if((null==e?void 0:e.animationProgress)>0&&!u.isSafeToRemove&&!u.isVShow)return;q(r),i.delete(r),0===i.size&&(null==(l=t.onExitComplete)||l.call(t)),n.has(u)?o(u):u.willUpdate("done"),s(),r.isConnected||u.unmount(!0)}}i.set(r,!0),q(r),a(u),H(()=>{u.setActive("exit",!0),A.set(r,d),r.addEventListener("motioncomplete",d)})}d(()=>{i.clear()});const r=c(()=>"wait"!==t.mode?{tag:t.as}:{mode:"wait"===t.mode?"out-in":void 0});return(e,t)=>(p(),m(y("wait"===e.mode?g:w),v({css:!1},r.value,{appear:"",onEnter:s,onLeave:l}),{default:f(()=>[h(e.$slots,"default")]),_:3},16))}}),R={slots:{base:"rounded-md",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none p-4 sm:p-8"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},U=["onClick"],V=Object.assign({inheritAttrs:!1},{__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(u){const d=u,h=e(),[g,w]=t(),C=x(!1),$=c(()=>n({extend:n(R),...h.uiPro?.prose?.img||{}})({zoom:d.zoom,open:C.value})),j=c(()=>{if(d.src?.startsWith("/")&&!d.src.startsWith("//")){const e=s(i(l().app.baseURL));if("/"!==e&&!d.src.startsWith(e))return r(e,d.src)}return d.src});return d.zoom&&a(window,"scroll",()=>{C.value=!1}),(e,t)=>(p(),b(E,null,[P(_(g),null,{default:f(()=>[(p(),m(y(_(o)),v({src:j.value,alt:u.alt,width:u.width,height:u.height},e.$attrs,{class:$.value.base({class:[d.ui?.base,d.class]})}),null,16,["src","alt","width","height","class"]))]),_:1}),u.zoom?(p(),m(_(T),{key:0,open:C.value,"onUpdate:open":t[0]||(t[0]=e=>C.value=e),modal:!1},{default:f(({close:e})=>[P(_(M),{"as-child":""},{default:f(()=>[P(_(L),{"layout-id":j.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:f(()=>[P(_(w))]),_:1},8,["layout-id"])]),_:1}),P(_(W),null,{default:f(()=>[P(_(N),null,{default:f(()=>[C.value?(p(),m(_(L),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:S($.value.overlay({class:[d.ui?.overlay]}))},null,8,["class"])):z("",!0),C.value?(p(),b("div",{key:1,class:S($.value.content({class:[d.ui?.content]})),onClick:e},[P(_(L),{"as-child":"","layout-id":j.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:f(()=>[P(_(w))]),_:1},8,["layout-id"])],10,U)):z("",!0)]),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(p(),m(_(w),{key:1}))],64))}});export{V as default};
